{"version":3,"file":"axis-description.js","sourceRoot":"","sources":["../../../../../src/interaction/action/component/axis/axis-description.ts"],"names":[],"mappings":"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","sourcesContent":["import { TOOLTIP_CSS_CONST } from \"@antv/component\";\nimport { deepMix } from \"@antv/util\";\nimport { HtmlTooltip } from \"../../../../dependents\";\nimport Action from \"../../base\";\nimport { getDelegationObject } from \"../../util\";\n\nconst AXIS_DESCRIPTION_TOOLTIP = 'aixs-description-tooltip'\n\nclass AxisDescription extends Action {\n  private tooltip;\n\n  public show() {\n    const context = this.context;\n    const { axis } = getDelegationObject(context);\n    const { description, text } = axis.cfg.title;\n    const { x, y } = context.event;\n    if(!this.tooltip) {\n      this.renderTooltip()\n    };\n    this.tooltip.update({\n      title: text || '',\n      customContent: () => {\n        return (`\n          <div class=\"${TOOLTIP_CSS_CONST.CONTAINER_CLASS}\">\n            <div class=\"${TOOLTIP_CSS_CONST.TITLE_CLASS}\">\n              ${text}\n            </div>\n            <div class=\"${TOOLTIP_CSS_CONST.LIST_CLASS}\">\n              ${description}\n            </div>\n          </div>\n        `)\n      },\n      x,\n      y\n    });\n    this.tooltip.show()\n  }\n\n  public destroy() {\n    super.destroy();\n    this.tooltip && this.tooltip.destroy();\n  }\n\n  public hide() {\n    this.tooltip && this.tooltip.hide()\n  }\n\n  public renderTooltip() {\n    const view = this.context.view;\n    const canvas = view.canvas;\n    const region = {\n      start: { x: 0, y: 0 },\n      end: { x: canvas.get('width'), y: canvas.get('height') },\n    };\n    const tooltip = new HtmlTooltip({\n      parent: canvas.get('el').parentNode,\n      region,\n      visible: false,\n      containerId: AXIS_DESCRIPTION_TOOLTIP,\n      domStyles: {\n        ...deepMix({}, {\n          // 超长的时候，tooltip tip 最大宽度为 50%，然后可以换行\n          [TOOLTIP_CSS_CONST.CONTAINER_CLASS]: {\n            'max-width': '50%',\n            'padding': '5px',\n            'line-height': '15px'\n          },\n          [TOOLTIP_CSS_CONST.TITLE_CLASS]: {\n            'word-break': 'break-all',\n            'font-size': '14px',\n            'margin-bottom': '3px'\n          },\n          [TOOLTIP_CSS_CONST.LIST_CLASS]: {\n            'word-break': 'break-all',\n            'opacity': '.5'\n          }\n        }),\n      },\n    });\n    tooltip.init();\n    tooltip.setCapture(false);\n    this.tooltip = tooltip\n  }\n}\nexport default AxisDescription\n"]}